# 选股器项目数据情况说明

## 当前数据状态

经过对项目代码和数据的分析，发现当前系统中整合的股票数据仅包含**10只股票**，具体如下：

| 股票代码 | 股票名称 | 所属行业 |
|---------|---------|---------|
| 600519.SH | 贵州茅台 | 酿酒行业 |
| 000858.SZ | 五粮液 | 酿酒行业 |
| 000333.SZ | 美的集团 | 家电行业 |
| 000651.SZ | 格力电器 | 家电行业 |
| 002415.SZ | 海康威视 | 电子元件 |
| 600900.SH | 长江电力 | 电力行业 |
| 601318.SH | 中国平安 | 保险行业 |
| 601888.SH | 中国中免 | 旅游酒店 |
| 600276.SH | 恒瑞医药 | 医药制造 |
| 000001.SZ | 平安银行 | 银行行业 |

## 数据来源分析

根据对代码的分析，项目的数据获取和整合机制如下：

1. **Tushare API调用**
   - `tushare_basic_data.py`脚本尝试通过Tushare API获取主板上市股票列表
   - 当API调用失败时，系统会自动使用预定义的`DEFAULT_STOCKS`列表（仅包含10只股票）
   - 当前系统似乎使用了默认股票列表，而没有成功获取完整的A股数据

2. **免费数据源**
   - `free_stock_data.py`脚本从新浪财经和东方财富网等免费数据源获取补充信息
   - 目前主要只获取行业分类信息，大部分财务指标（如PE、PB、ROE）为默认值0
   - 免费数据源的获取受限于网站结构变化和访问频率限制

3. **数据整合过程**
   - `integrate_stock_data.py`整合来自Tushare和免费数据源的数据
   - 最终整合结果保存在`stock_data.json`文件中，用于前端展示

## 数据限制原因

当前系统只包含10只股票数据的主要原因是：

1. **Tushare API访问限制**：
   - Tushare API有访问频率和积分限制
   - 当前使用的是零积分接口，功能有限
   - 系统在API调用失败时自动切换到默认股票列表

2. **免费数据源的局限性**：
   - 从网页抓取数据受限于网站结构变化
   - 频繁请求可能导致IP被封
   - 目前只实现了基础的行业信息获取

3. **数据获取流程未完整执行**：
   - 可能缺少完整运行数据更新脚本的步骤
   - 没有创建自动更新数据的批处理文件

## 如何获取完整的A股市场数据

要获取完整的A股市场数据，需要执行以下步骤：

### 1. 确保Tushare API可正常使用

```python
# 修改tushare_basic_data.py中的TOKEN（如果需要）
TOKEN = 'e4f693ec67d80ef11b6fd446007110cd95bbf82508b7a7758e4f6fad'
```

### 2. 按顺序运行数据更新脚本

1. 首先运行Tushare基础数据获取脚本：
   ```bash
   python tushare_basic_data.py
   ```

2. 然后运行免费数据源补充脚本：
   ```bash
   python free_stock_data.py
   ```

3. 最后运行数据整合脚本：
   ```bash
   python integrate_stock_data.py
   ```

### 3. 创建自动更新批处理文件

创建一个`更新股票数据.bat`文件，内容如下：

```batch
@echo off
cd /d %~dp0

:: 运行Tushare基础数据获取脚本
python tushare_basic_data.py
if %errorlevel% neq 0 goto error

:: 运行免费数据源补充脚本
python free_stock_data.py
if %errorlevel% neq 0 goto error

:: 运行数据整合脚本
python integrate_stock_data.py
if %errorlevel% neq 0 goto error

echo 所有数据更新完成！
pause
exit /b 0

:error
echo 数据更新过程中出现错误！
pause
exit /b 1
```

### 4. 考虑使用付费数据接口

如果需要更稳定、更完整的数据，可以考虑：
- 升级Tushare账户获取更多API权限
- 使用其他专业的金融数据服务
- 考虑订阅商业数据接口

## 数据更新频率建议

为了保持数据的及时性，建议：
- 每日收盘后更新股票价格和交易数据
- 每季度更新财务指标数据
- 定期检查数据源网站结构是否有变化

## 后续改进方向

1. **优化数据获取机制**：
   - 增加API调用重试机制
   - 实现更智能的数据源切换策略
   - 添加数据缓存功能减少重复请求

2. **丰富数据内容**：
   - 完善从免费数据源获取财务指标的功能
   - 增加更多技术指标和基本面数据
   - 实现数据质量检查和清洗功能

3. **自动化数据更新**：
   - 设置定时任务自动更新数据
   - 添加更新日志记录
   - 实现数据更新状态监控

通过以上改进，可以逐步构建一个包含完整A股市场数据的选股系统，为股票分析和投资决策提供更全面的数据支持。